---
layout: post
title: Server Performance Improvement
category: Server
---


서버의 성능을 위해 반드시 알아야하는 내용.

Latency

- bandwith vs latency 에서는 latency가 더 중요하다.
- latency가 떨어지는 큰 이유: 서버가 물리적으로 많이 떨어져있는 경우 - 전기 신호의 저항
- CDN
	- 물리적으로 많이 떨어져있는 파일들을 가져올 때 latency를 줄이기 위해서 고안.
	- 동영상, 이미지 등 용량이 큰 파일들을 별도로 관리해서 가장 가까운 서버에서 컨텐츠를 제공하는 서비스.
- 다른 이유: 
	- 개발자의 서버 설계. 데이터베이스, 외부 api 연동 등.
	- css/js/img 자원의 응답.
	- 자주 변하지 않는 자원은 한번 다운 받고 다시 받지 않는 것이 좋음 - 정적 자원에 대한 캐시(가장 효과적!). - disk, memory cache.
	- 서버 설정에 따라 캐싱 전략이 달라진다.
	- 자원이 바뀌면 클라이언트에게 알려줘야한다. 자원에 성격에 따라서 다르게 설정해야한다.
	- ETag는 클라이언트가 이테그 값과 함께 다시 서버에게 자원을 요청하면 서버는 이테그 값을 보고 컨텐츠가 바뀌었는지 안바뀌었는지 검증을 해서 그 여부에 따라 다른 응답 (eg. 304). - 이테그는 서버에서 자원의 생성시간, 내용 등을 해시값을 구해서 보냄. 
- 이렇게 따로 코딩하지 않고 서버의 설정만 알고 있으면 성능 개선을 효과적으로 할 수 있다.

압축 

- 주로 텍스트 파일 - html/css/js
- 이미지 파일 등은 별로 압축률이 얼마되지 않아서 압축/복구 비용에 비해 얻는 이점이 없다.

Connection: Keep-alive

- 전에 사용했던 소켓 커넥션을 사용하겠다는 의미.
- HTTP1.1은 기본적으로 Keep-alive를 사용하고 있다.