---
layout: post
title: 테스트 주도 개발 (TDD)에 대한 생각
category: Thoughts
tags: TDD
---

자바 언어를 배우기 시작한지 어느덧 두 달이 다 되어간다. 숫자야구게임, 자동차경주게임, 사다리게임, 좌표계산기, 로또, 그리고 현재의 볼링점수판을 구현하면서 언어적인 측면에서는 상당히 많은 발전이 있었던 것 같지만, 객체지향적 설계나 테스트 주도 개발 측면에서는 아직 부족함을 느낀다. 특히, 필요 객체 추출 및 추상화를 하는 게 아직 완전히 감이 잡히질 않는다. 그래도 여러 미션들을 수행하면서 기록한 느낀 점들과 여러 생각들을 정리해 보았다.

---

먼저 테스트 주도 개발 (TDD)에 대한 생각이다. 코드스쿼드 과정에서 왜 TDD를 그렇게 중요시 하는지는 설명을 들으면 '아~그렇겠구나' 싶지만, 실제로 미션과정에 적용하는 것은 완전히 다른 얘기였다. 

테스트 주도 개발이 아닌 개발의 과정은 다음과 같을 것이다. 자신이 짠 코드가 제대로 실행되는지 확인하려면, 메인에서 실행한 다음 UI에서 결과를 확인해야 한다. 그렇게까지 하려면 메인 로직을 짜고 UI에 띄우는 코드까지 다 완성한 다음 문제가 있는지 프로그램을 돌려봐야 한다. 그리고 왠만한 사이즈의 프로그램이 한번에 원하는대로 딱 돌아가는 일은 절대 없기 때문에, 당연히 버그를 발견할 것이다. 버그를 발견하면 그 버그가 어디에서 일어나는지 자신이 짜놓은 실타리 처럼 얽힌 코드를 보면서 어디에 문제가 있는지 디버깅 도구를 사용하면서 찾을 것이고, 버그를 찾아서도 서로 의존성이 높은 코드 때문에 한 곳을 고치면 또 다른 곳에서 문제가 생겨서 돌려막는 식으로 개발이 진행된다. 이렇게 탄생하는 프로그램은 당연히 유지보수가 어렵고 확장성이 낮으며, 새로운 요구사항이 추가되는 순간 절망을 유발한다.

테스트 주도 개발은 위 과정의 고통을 작은 단위로 나눠서 밑에서부터 차근차근 단위테스트를 한다. 테스크코드를 작성하며 프로그램을 짜면 위의 방식보단 시간이 오래걸릴 수도 있지만 시작 단계부터 버그가 숨어들어갈 틈을 차단할 수 있다. ***내가 미션을 진행하면서 느낀 TDD의 최고 장점은 프로그래머에게서부터 클린코드를 구사하도록 유도한다는 것이다.*** 개별적으로 메서드 단위테스트를 해야하니 메서드가 하나의 일만 하도록 코드를 작성하게 된다. 따라서 유지보수, 확장, 요구사항 추가 등이 비교적 쉽다.

---

실제로 처음 테스트 주도로 코드 작성하려 하니 막막했다. 첫번째로 어떤 로직이 핵심인지 짚어내고 어느 메서드부터 테스트코드를 작성할지 정하는게 어려웠다. 이건 정말 어쩔 수 없는 것 같다. 그냥 계속 해보면서 감이 조금씩 오는 것 같다. 

둘째로 여러 잡다한 고려사항이 있었다. 예를 들어, 접근제어자를 private으로 하면 테스트가 불가능하기 때문에 어짜피 여러 작은 메서드를 호출하는, 접근제어자가 public인  메서드를 테스트해야하나.. 아니면 테스트를 위해 작은 메서드들의 접근제어자까지 default로 바꿔야하나 고민이 많이 됐다. 여러 시도를 해본 후 현재 내 생각은, 접근제어자를 제한하는 것이 우선순위가 더 높기 때문에 굳이 테스트코드가 있기 때문에 접근제어자를 default로 두는 것은 바람직하지 않다. 하지만 제일 작은 메서드를 만들때는 메서드가 제대로 작동하는지 확인해야하기 때문에 먼저 테스트를 하고 난 후에 더 큰 메서드 및 테스트코드를 작성하면 접근제어자를 private으로 고치는 것이다. 

셋째로, 객체지향적 설계에 대해 나중에 생각을 정리할 예정이지만, 너무 bottom-up에만 치중하면 ***시야가 좁아져 객체지향적 설계와 객체 간의 협력구조에 대해서 망각해버리고 해당 코드가 정확히 왜 필요한지 그 의미가 흐려진다는 것이다.*** 그래서 미리 큰 그림을 머리속에 그려놓고 종이에 객체 간의 관계가 무엇인지 노트해가며 코드를 작성하고 가끔씩 한걸음 뒤로 물러나서 이 방향이 맞는지 확인하는 과정이 필요한 것 같다.

확실한 것은 TDD 방식으로 코딩을 하고 작성한 코드를 보면 깔끔하다는 것이다. 각 메서드들이 최대한 하나의 일만 하도록 작성되니 하는 일이 무엇인지 명확하다. 단위 테스트를 이미 했기때문에 이 메서드들이 호출되면 의도되로 돌아갈 거라는 확신이 있다. 지금까지 느낀 것만으로도 TDD가 얼마나 좋은지 알 수 있었기 때문에 앞으로도 계속 TDD를 지향하며 개발을 해야겠다는 생각이 든다.
